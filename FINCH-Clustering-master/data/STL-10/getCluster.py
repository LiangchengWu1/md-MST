import sys
import numpy as np

import finch
from finch import FINCH
import ast
import json  # Step 1: Import the json module


# # 解析数组字符串为二维数组
arg1 = "693.0,78.0,;88.0,609.0,;781.0,0.0,;436.0,917.0,;276.0,757.0,;358.0,856.0,;67.0,963.0,;299.0,151.0,;59.0,205.0,;91.0,991.0,;595.0,35.0,;669.0,656.0,;557.0,131.0,;729.0,569.0,;918.0,154.0,;602.0,312.0,;120.0,154.0,;625.0,180.0,;669.0,712.0,;40.0,284.0,;328.0,859.0,;92.0,831.0,;586.0,701.0,;918.0,664.0,;478.0,827.0,;95.0,613.0,;817.0,122.0,;737.0,242.0,;539.0,39.0,;249.0,173.0,;274.0,577.0,;520.0,83.0,;707.0,288.0,;236.0,107.0,;228.0,120.0,;263.0,78.0,;313.0,589.0,;103.0,771.0,;341.0,209.0,;748.0,758.0,;907.0,451.0,;438.0,836.0,;730.0,154.0,;374.0,607.0,;608.0,573.0,;282.0,281.0,;870.0,663.0,;275.0,47.0,;522.0,929.0,;100.0,866.0,;853.0,413.0,;60.0,996.0,;265.0,737.0,;868.0,81.0,;786.0,843.0,;409.0,161.0,;282.0,384.0,;817.0,741.0,;643.0,273.0,;577.0,247.0,;627.0,813.0,;76.0,26.0,;294.0,32.0,;507.0,352.0,;571.0,768.0,;107.0,777.0,;276.0,854.0,;131.0,5.0,;805.0,408.0,;212.0,738.0,;642.0,987.0,;997.0,23.0,;755.0,884.0,;636.0,616.0,;31.0,785.0,;562.0,946.0,;570.0,568.0,;984.0,689.0,;50.0,389.0,;761.0,557.0,;82.0,896.0,;536.0,35.0,;752.0,36.0,;631.0,239.0,;233.0,343.0,;340.0,197.0,;608.0,658.0,;44.0,346.0,;445.0,104.0,;626.0,363.0,;525.0,737.0,;61.0,535.0,;636.0,977.0,;308.0,720.0,;207.0,757.0,;618.0,336.0,;790.0,941.0,;72.0,994.0,;714.0,188.0,;221.0,697.0,;"

array_rows = arg1.strip(";").split(";")

data_a = []
for row in array_rows:
    values = row.split(",")
    row_values = [float(value) for value in values if value != '']
    data_a.append(row_values)
data_a = np.array(data_a)
c_a ,num_clust, req_c_a = FINCH(data_a, req_clust=8, distance='euclidean', verbose=True)
print(c_a)
print(num_clust)
print(req_c_a)

# Step 2: Convert orig_dist to a Python list
# orig_dist_list = orig_dist.tolist()
# result = {
#     "req_c_a": req_c_a,
#     "orig_dist":  orig_dist
# }

# Step 3: Print the entire result including orig_dist
# print(json.dumps(result))
